<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.110.0"><meta name=description content><link rel="shortcut icon" href=/images/kolibri.svg type=image/x-icon><title>Kolibri Documentation :: Kolibri Documentation</title><link href=/css/nucleus.css?1691571795 rel=stylesheet><link href=/css/fontawesome-all.min.css?1691571795 rel=stylesheet><link href=/css/hybrid.css?1691571795 rel=stylesheet><link href=/css/featherlight.min.css?1691571795 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1691571795 rel=stylesheet><link href=/css/auto-complete.css?1691571795 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1691571795 rel=stylesheet><link href=/css/theme.css?1691571795 rel=stylesheet><link href=/css/tabs.css?1691571795 rel=stylesheet><link href=/css/hugo-theme.css?1691571795 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1691571795></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/kolibri/><nav id=sidebar><div id=header-wrapper><div id=header><img src=/images/kolibri.svg alt=Kolibri height=100><div>HOME OF KOLIBRI</div></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1691571795></script>
<script type=text/javascript src=/js/auto-complete.js?1691571795></script>
<script type=text/javascript>var baseurl="http://awagen.github.io/"</script><script type=text/javascript src=/js/search.js?1691571795></script></div><section id=homelinks><ul><li><a class=padding href=/><i class='fas fa-home'></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/kolibri/ title="Kolibri Documentation" class="dd-item
active"><a href=/kolibri/>Kolibri Documentation</a><ul><li data-nav-id=/kolibri/first-steps/ title="First Steps" class=dd-item><a href=/kolibri/first-steps/>First Steps</a><ul><li data-nav-id=/kolibri/first-steps/1-getting-started/ title="Configure / Run" class=dd-item><a href=/kolibri/first-steps/1-getting-started/><b>1. </b>Configure And Run</a></li><li data-nav-id=/kolibri/first-steps/2-using-the-ui/ title="Usage via UI" class=dd-item><a href=/kolibri/first-steps/2-using-the-ui/><b>2. </b>Usage via UI</a></li><li data-nav-id=/kolibri/first-steps/3-useful-examples/ title="Actually useful examples - Composing a job definition" class=dd-item><a href=/kolibri/first-steps/3-useful-examples/><b>3. </b>Actually useful examples - Composing a job definition</a></li><li data-nav-id=/kolibri/first-steps/4-api-endpoints/ title="API Endpoints" class=dd-item><a href=/kolibri/first-steps/4-api-endpoints/><b>4. </b>API Endpoints</a></li></ul></li></ul></li><li data-nav-id=/kolibri_archive/ title="Kolibri Documentation (Archive / Deprecated)" class=dd-item><a href=/kolibri_archive/>Kolibri Documentation (Archive / Deprecated)</a><ul><li data-nav-id=/kolibri_archive/kolibri-datatypes/ title="Kolibri-DataTypes Documentation" class=dd-item><a href=/kolibri_archive/kolibri-datatypes/>Kolibri-DataTypes Documentation</a><ul><li data-nav-id=/kolibri_archive/kolibri-datatypes/1-types/ title=Types class=dd-item><a href=/kolibri_archive/kolibri-datatypes/1-types/><b>1. </b>Types</a><ul><li data-nav-id=/kolibri_archive/kolibri-datatypes/1-types/1-categories/ title="DataType Categories" class=dd-item><a href=/kolibri_archive/kolibri-datatypes/1-types/1-categories/><b>1 - </b>DataType Categories</a></li></ul></li></ul></li><li data-nav-id=/kolibri_archive/kolibri-base/ title="Kolibri-Base Documentation" class=dd-item><a href=/kolibri_archive/kolibri-base/>Kolibri-Base Documentation</a><ul><li data-nav-id=/kolibri_archive/kolibri-base/1-basics/ title=Basics class=dd-item><a href=/kolibri_archive/kolibri-base/1-basics/><b>1. </b>Basics</a><ul><li data-nav-id=/kolibri_archive/kolibri-base/1-basics/1-runningit/ title="Getting it started" class=dd-item><a href=/kolibri_archive/kolibri-base/1-basics/1-runningit/><b>1 - </b>Getting it started</a></li><li data-nav-id=/kolibri_archive/kolibri-base/1-basics/2-monitoring/ title=Monitoring class=dd-item><a href=/kolibri_archive/kolibri-base/1-basics/2-monitoring/><b>2 - </b>Monitoring</a></li><li data-nav-id=/kolibri_archive/kolibri-base/1-basics/3-executeexamplejob/ title="Executing examples" class=dd-item><a href=/kolibri_archive/kolibri-base/1-basics/3-executeexamplejob/><b>3 - </b>Executing examples</a></li></ul></li><li data-nav-id=/kolibri_archive/kolibri-base/2-mechanisms/ title=Mechanisms class=dd-item><a href=/kolibri_archive/kolibri-base/2-mechanisms/><b>2. </b>Mechanisms</a><ul><li data-nav-id=/kolibri_archive/kolibri-base/2-mechanisms/1-overview/ title=Basics class=dd-item><a href=/kolibri_archive/kolibri-base/2-mechanisms/1-overview/><b>1 - </b>Basics</a></li></ul></li><li data-nav-id=/kolibri_archive/kolibri-base/3-step-by-step/ title="Step-by-Step Guide" class=dd-item><a href=/kolibri_archive/kolibri-base/3-step-by-step/><b>3. </b>Step-by-Step Guide</a><ul><li data-nav-id=/kolibri_archive/kolibri-base/3-step-by-step/0-overview/ title=Overview class=dd-item><a href=/kolibri_archive/kolibri-base/3-step-by-step/0-overview/><b>0 - </b>Overview</a></li><li data-nav-id=/kolibri_archive/kolibri-base/3-step-by-step/1-values/ title=Values class=dd-item><a href=/kolibri_archive/kolibri-base/3-step-by-step/1-values/><b>1 - </b>Values</a></li><li data-nav-id=/kolibri_archive/kolibri-base/3-step-by-step/2-generators/ title=Generators class=dd-item><a href=/kolibri_archive/kolibri-base/3-step-by-step/2-generators/><b>2 - </b>Generators</a></li><li data-nav-id=/kolibri_archive/kolibri-base/3-step-by-step/3-tags/ title=Tagging class=dd-item><a href=/kolibri_archive/kolibri-base/3-step-by-step/3-tags/><b>3 - </b>Tagging</a></li><li data-nav-id=/kolibri_archive/kolibri-base/3-step-by-step/4-processing-messages/ title="Processing Messages / Aggregation States" class=dd-item><a href=/kolibri_archive/kolibri-base/3-step-by-step/4-processing-messages/><b>4 - </b>Processing Messages / Aggregation States</a></li><li data-nav-id=/kolibri_archive/kolibri-base/3-step-by-step/5-writers/ title="Formats & Writers" class=dd-item><a href=/kolibri_archive/kolibri-base/3-step-by-step/5-writers/><b>5 - </b>Formats & Writers</a></li></ul></li><li data-nav-id=/kolibri_archive/kolibri-base/4-inputs/ title=Inputs class=dd-item><a href=/kolibri_archive/kolibri-base/4-inputs/><b>4. </b>Inputs</a></li></ul></li><li data-nav-id=/kolibri_archive/kolibri-watch/ title="Kolibri-Watch Documentation" class=dd-item><a href=/kolibri_archive/kolibri-watch/>Kolibri-Watch Documentation</a><ul><li data-nav-id=/kolibri_archive/kolibri-watch/1-ui/ title="UI - Kolibri Watch" class=dd-item><a href=/kolibri_archive/kolibri-watch/1-ui/><b>1. </b>UI - Kolibri Watch</a><ul><li data-nav-id=/kolibri_archive/kolibri-watch/1-ui/1-overview/ title=Overview class=dd-item><a href=/kolibri_archive/kolibri-watch/1-ui/1-overview/><b>1 - </b>Overview</a></li></ul></li></ul></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/awagen/kolibri/tree/main/kolibri-datatypes><i class='fab fa-github'></i> Github kolibri-datatypes repo</a></li><li><a class=padding href=https://github.com/awagen/kolibri/tree/main/kolibri-storage><i class='fab fa-github'></i> Github kolibri-storage repo</a></li><li><a class=padding href=https://github.com/awagen/kolibri/tree/main/kolibri-definitions><i class='fab fa-github'></i> Github kolibri-definitions repo</a></li><li><a class=padding href=https://github.com/awagen/kolibri/tree/main/kolibri-fleet-zio><i class='fab fa-github'></i> Github kolibri-fleet-zio repo</a></li><li><a class=padding href=https://github.com/awagen/kolibri/tree/main/kolibri-watch><i class='fab fa-github'></i> Github kolibri-watch repo</a></li><li><a class=padding href=https://github.com/awagen/response-juggler><i class='fab fa-github'></i> Github response-juggler repo</a></li><li><a class=padding href=https://www.linkedin.com/in/andreas-wagenmann/><i class='fab fa-linkedin'></i> LinkedIn</a></li><li><a class=padding href=https://twitter.com/andiwagen><i class='fab fa-twitter'></i> Twitter</a></li></ul></section><section id=footer></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/>Home</a> > Kolibri Documentation</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#kolibri-datatypes>Kolibri DataTypes</a></li><li><a href=#kolibri-storage>Kolibri Storage</a></li><li><a href=#kolibri-definitions>Kolibri Definitions</a></li><li><a href=#kolibri-fleet-zio>Kolibri Fleet ZIO</a></li><li><a href=#kolibri-watch-ui>Kolibri Watch (UI)</a></li><li><a href=#response-juggler>Response Juggler</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Kolibri Documentation</h1><blockquote><p><strong>Kolibri - The Execution Engine that loves E-Commerce Search</strong></p></blockquote><p>Kolibri is the german word for hummingbird. I picked it as project name to reflect the general aim
to do many smaller things fast. And this describes the batch processing logic still quite well.</p><p>Built in Scala, based on the ZIO framework, Kolibri provides easy-to-use mechanisms to compose
computing tasks, define how to batch the tasks, do grouped aggregations and represent these aspects
in such a way that the jobs can easily be distributed among the worker-nodes, which do not need to
be tightly coupled in a cluster setting, but perform all necessary synchronizations via the used
storage.
The worker nodes do not need to live in the same environment, so whether it is purely local testing on one machine,
testing with colleagues on a combination of local machines, cloud deployments or a mixture thereof - the only thing
that matters is that the nodes have read and write access to the storage.
This could either be a file-based such as local file system, s3, gcs, or any other cloud storage
that simulates a file system or databases such as redis.
Right now only local file system and s3 are implemented, more are expected to follow.</p><p>Further, while the framework is usable for all kinds of computations, its main focus in terms of pre-defined jobs
is on <code>e-commerce search</code> related functionality to ease evaluation of results. For this certain tasks are
already implemented, such as:</p><ul><li>Flexible definition of permutations, including the possibility to restrict the range of values based on the value
of another parameter, restricting grid-search computations to the actually needed set of combinations.
Changeable parameters in requests include all aspects, such as url parameters, headers, body.</li><li>Requesting a service via http/https and parsing needed fields out of it, providing easy-to-define syntax for what to parse
instead of needing to add any parsing logic yourself.</li><li>Judgement-list based calculation of common information retrieval metrics (such as DCG, NDCG, ERR, Precision, Recall)</li><li>Requesting and comparing distinct search systems in terms of result overlap (jaccard distance).</li><li>Computing the results with attached tags, where partial results are written on the go instead of waiting for the whole.</li><li>Aggregations of partial results with the option to apply a weight to different results (such as weighting down
results belonging to lower-traffic queries)</li></ul><blockquote><p><strong>Why the &mldr; should you use this?</strong></p></blockquote><p>You might want to consider <code>Kolibri</code> if you:</p><ul><li>Need a lean mechanism to process many samples but do not want to deploy any additional setup such as
queues or databases (using them might become an option at some point, but you won&rsquo;t need them)</li><li>Need a convenient mechanism to define permutations of parameters, including making values conditional
on the value sampled for another parameter, to effectively limit the computation needed for grid-search.</li><li>Want a UI coming with it that gives you control over the tooling</li><li>Want to try it out from local, from many machines in a group of co-workers or in a combination of
cloud-deployed machines and local machines. There is no distinction made between where a machine sits,
as long as it has access to the resources needed for computation and the configured storage over which
state information is synced.</li><li>Are working in search / e-commerce search and do not want to write the Nth framework for evaluation of
search system results, such as <code>distributions of result attribute values</code> as in <code>STRING_SEQUENCE_VALUE_OCCURRENCE_HISTOGRAM</code>
or comparing results of two search systems with a <code>JACCARD</code> metric,
or information retrieval metrics such as <code>DCG</code>, <code>NDCG</code>, <code>PRECISION</code>, <code>RECALL</code>, <code>ERR</code>, general metrics such as <code>IDENTITY</code> (when extracting single
attributes, such as numDocs), <code>FIRST_TRUE</code>, <code>FIRST_FALSE</code>, <code>TRUE_COUNT</code>, <code>FALSE_COUNT</code>,
<code>BINARY_PRECISION_TRUE_AS_YES</code>, <code>BINARY_PRECISION_FALSE_AS_YES</code><ul><li>also want convenient support in specifying experiments, by defining the target system, permutations of
different types of request modifiers (allowing adjustment of url parameters, headers, body), the fields that need
to be parsed from the responses and what to do with them (e.g which metrics to calculate)</li><li>also need tagging/grouping of partial results</li><li>want to aggregate partial results for an overall look at the data and be able to apply distinct weights per
result group (such as weighting down the results of less frequent queries)</li><li>need a nice visualization of results (pending to be activated and extended now that the rewrite is complete)</li></ul></li><li>Are not working in the above field but need a service that conveniently allows definition of all kinds of
processing steps to define workflows.</li><li>&mldr; jeah, just use it!</li></ul><p>A short description of the single libraries is given in the following.
In the further sub-sections of this documentation you will find step-by-step descriptions on how to use <code>kolibri</code>.</p><h2 id=kolibri-datatypes>Kolibri DataTypes</h2><p>This library contains basic datatypes to simplify
common tasks in batch processing and async state keeping.</p><p><a href=https://github.com/awagen/kolibri/tree/main/kolibri-datatypes>Kolibri-DataTypes on Github</a></p><h2 id=kolibri-storage>Kolibri Storage</h2><p>This library contains the storage implementations, such as file-based local disc, cloud-based such as AWS and GCP,
and will likely contain non-file-based implementations such as redis at some point.</p><p><a href=https://github.com/awagen/kolibri/tree/main/kolibri-storage>Kolibri-Storage on Github</a></p><h2 id=kolibri-definitions>Kolibri Definitions</h2><p>Contains the actual job definitions without the actual execution mechanism, to provide the parts
that can be utilized / processed using in a respective service such as kolibri-fleet-zio.</p><p><a href=https://github.com/awagen/kolibri/tree/main/kolibri-definitions>Kolibri-Fleet-ZIO on Github</a></p><h2 id=kolibri-fleet-zio>Kolibri Fleet ZIO</h2><p><code>Kolibri Fleet ZIO</code> provides a multi-node batch execution setup.
Batch definitions are flexible and make use of
Akka-Streams, allowing the definition of flexible execution flows.
Results are aggregated per batch and on demand aggregated to
an overall result.</p><p>Features include:</p><ul><li>Storage-based task queue, no need for additional deployments of queue system or databases.</li><li>Synchronization of nodes via storage, thus it does not matter where nodes are located.
They only need access to the selected storage. No need for direct node-to-node connections / tight clustering.
This means you can just spin up your own local machine or several local machines in your office or
spin up multiple nodes in the cloud or run all of them at the same time.
In case some job shall not be computed using the resources of all connected nodes, this can be achieved
by modifying the stored directive (that either indicates &ldquo;processing for all&rdquo;, &ldquo;only process on node X&rdquo;, &ldquo;stop processing&rdquo; and similar
directives)</li><li>Easy definition of datasets / permutations / tags / groups</li><li>Mechanisms to split those sets into smaller batches</li><li>Storage-based negotiation logic of single nodes to claim rights to process batches / single actions (such as cleaning up after a node that went offline) including state handling and collection of partial results</li></ul><p>Use case job definitions include:</p><ul><li>Search parameter grid evaluation with flexible tagging based on request (e.g by request parameter), result (e.g size of result set, other characteristics of the
search response) or actually derived metrics (given by a MetricRow object) result. Tagging allows separation into distinct aggregations based
on the concept a tag represents.</li></ul><p><a href=https://github.com/awagen/kolibri/tree/main/kolibri-fleet-zio>Kolibri-Fleet-ZIO on Github</a></p><p><a href=https://hub.docker.com/repository/docker/awagen/kolibri-fleet-zio>Kolibri-Fleet-ZIO on DockerHub</a></p><h2 id=kolibri-watch-ui>Kolibri Watch (UI)</h2><p><code>Kolibri Watch</code> provides a UI for the Kolibri project, allowing monitoring of job execution progress,
definition of the executions and submission to the Kolibri backend for execution.</p><p><a href=https://github.com/awagen/kolibri/tree/main/kolibri-watch>Kolibri-Watch on Github</a></p><p><a href=https://hub.docker.com/repository/docker/awagen/kolibri-watch>Kolibri-Watch on DockerHub</a></p><h2 id=response-juggler>Response Juggler</h2><p><code>Response Juggler</code> is only listed here as mock service for trying out kolibri.
You will find an example configuration in the docker-compose file in the root of the kolibri-project.
It is used there to mimick a search service by sampling results that are then processed according
to the job definition posted via kolibri-fleet-zio.
This way you can directly out of the box try out whether handling of a specific response format
is correct and/or execute benchmarks.
It allows definition of a main template that defines how a response is supposed to look
and definitions of the placeholders (enclosed in <code>{{</code> and <code>}}</code>), for example:</p><pre tabindex=0><code>{
  &#34;response&#34;: {
    &#34;docs&#34;: {{DOCS}},
    &#34;numFound&#34;: {{NUM_FOUND}}
  }
}
</code></pre><p>The placeholders need to have a sampling mechanism configured. For example <code>{{DOCS}}</code> could
be configured to map to a partial-file that defines the following json format:</p><pre tabindex=0><code>{
  &#34;product_id&#34;: {{PID}},
  &#34;bool&#34;:  {{BOOL}},
  &#34;string_val_1&#34;: {{STRING_VAL1}}
}
</code></pre><p>Since this last json snippet is already at the leave level and no place-holder comes below, we can
configure specific values for them instead of other json values with other placeholders.
A specific value sampling definition can look similar to this one (values to left just refer to set
environment valiables, where the right side describes the set value for that variable):</p><pre tabindex=0><code>RESPONSE_FIELD_IDENT_STRING_VAL1: &#34;{{STRING_VAL1}}&#34;
RESPONSE_FIELD_SAMPLER_TYPE_STRING_VAL1: &#34;SINGLE&#34;
RESPONSE_FIELD_SAMPLER_ELEMENT_CAST_STRING_VAL1: &#34;STRING&#34;
RESPONSE_FIELD_SAMPLER_SELECTION_STRING_VAL1: &#34;p0,p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19&#34;
</code></pre><p>The above specifies that the placeholder <code>{{STRING_VAL1}}</code> corresponds to a single (<code>SINGLE</code>) value,
which is of type string (<code>STRING</code>) and is samples out of a comma-separated selection
among the values <code>p0,p1,p2,p3,p4,p5,p6,p7,p8,p9,p10,p11,p12,p13,p14,p15,p16,p17,p18,p19</code>.</p><p>For further information on usage, refer to below reference to the project page.</p><p><a href=https://github.com/awagen/response-juggler>Response-Juggler on Github</a></p><p><a href=https://hub.docker.com/repository/docker/awagen/response-juggler>Response-Juggler on DockerHub</a></p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/ title=Home><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/kolibri/first-steps/ title="First Steps" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1691571795></script>
<script src=/js/perfect-scrollbar.min.js?1691571795></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1691571795></script>
<script src=/js/jquery.sticky.js?1691571795></script>
<script src=/js/featherlight.min.js?1691571795></script>
<script src=/js/highlight.pack.js?1691571795></script>
<script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1691571795></script>
<script src=/js/learn.js?1691571795></script>
<script src=/js/hugo-learn.js?1691571795></script>
<script src=/mermaid/mermaid.js?1691571795></script>
<script>mermaid.initialize({startOnLoad:!0})</script></body></html>