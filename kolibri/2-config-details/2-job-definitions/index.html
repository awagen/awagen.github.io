<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.110.0"><meta name=description content><link rel="shortcut icon" href=/images/kolibri.svg type=image/x-icon><title>Job Configurations :: Kolibri Documentation</title><link href=/css/nucleus.css?1694164550 rel=stylesheet><link href=/css/fontawesome-all.min.css?1694164550 rel=stylesheet><link href=/css/hybrid.css?1694164550 rel=stylesheet><link href=/css/featherlight.min.css?1694164550 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1694164550 rel=stylesheet><link href=/css/auto-complete.css?1694164550 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1694164550 rel=stylesheet><link href=/css/theme.css?1694164550 rel=stylesheet><link href=/css/tabs.css?1694164550 rel=stylesheet><link href=/css/hugo-theme.css?1694164550 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1694164550></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/kolibri/2-config-details/2-job-definitions/><nav id=sidebar><div id=header-wrapper><div id=header><img src=/images/kolibri.svg alt=Kolibri height=100><div>HOME OF KOLIBRI</div></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1694164550></script>
<script type=text/javascript src=/js/auto-complete.js?1694164550></script>
<script type=text/javascript>var baseurl="http://awagen.github.io/"</script><script type=text/javascript src=/js/search.js?1694164550></script></div><section id=homelinks><ul><li><a class=padding href=/><i class='fas fa-home'></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/kolibri/ title="Kolibri Documentation" class="dd-item
parent"><a href=/kolibri/>Kolibri Documentation</a><ul><li data-nav-id=/kolibri/1-first-steps/ title="1. First Steps" class=dd-item><a href=/kolibri/1-first-steps/>1. First Steps</a><ul><li data-nav-id=/kolibri/1-first-steps/1-getting-started/ title="Configure / Run" class=dd-item><a href=/kolibri/1-first-steps/1-getting-started/><b>1. </b>Configure And Run</a></li><li data-nav-id=/kolibri/1-first-steps/2-using-the-ui/ title="Usage via UI" class=dd-item><a href=/kolibri/1-first-steps/2-using-the-ui/><b>2. </b>Usage via UI</a></li><li data-nav-id=/kolibri/1-first-steps/3-useful-examples-pt1/ title="Actually useful examples Pt1 - Composing a job definition / Aggregation" class=dd-item><a href=/kolibri/1-first-steps/3-useful-examples-pt1/><b>3. </b>Actually useful examples Pt1 - Composing a job definition / Aggregation</a></li><li data-nav-id=/kolibri/1-first-steps/4-useful-examples-pt2/ title="Actually useful examples Pt2 - Comparing search systems" class=dd-item><a href=/kolibri/1-first-steps/4-useful-examples-pt2/><b>4. </b>Actually useful examples Pt2 - Comparing search systems</a></li><li data-nav-id=/kolibri/1-first-steps/5-troubleshoot/ title=Troubleshoot class=dd-item><a href=/kolibri/1-first-steps/5-troubleshoot/><b>5. </b>Troubleshoot</a></li><li data-nav-id=/kolibri/1-first-steps/6-api-endpoints/ title="API Endpoints" class=dd-item><a href=/kolibri/1-first-steps/6-api-endpoints/><b>6. </b>API Endpoints</a></li></ul></li><li data-nav-id=/kolibri/2-config-details/ title="2. Configuring Jobs / Tasks" class="dd-item
parent"><a href=/kolibri/2-config-details/>2. Configuring Jobs / Tasks</a><ul><li data-nav-id=/kolibri/2-config-details/1-task-definitions/ title="Task Configurations" class=dd-item><a href=/kolibri/2-config-details/1-task-definitions/><b>1. </b>Task Definition Types</a></li><li data-nav-id=/kolibri/2-config-details/2-job-definitions/ title="Job Configurations" class="dd-item
active"><a href=/kolibri/2-config-details/2-job-definitions/><b>2. </b>Job Definition Types</a></li><li data-nav-id=/kolibri/2-config-details/3-config-options/ title="Configuration Options" class=dd-item><a href=/kolibri/2-config-details/3-config-options/><b>3. </b>Configuration Options</a><ul><li data-nav-id=/kolibri/2-config-details/3-config-options/1-resourcedirectives/ title="Resource Directives" class=dd-item><a href=/kolibri/2-config-details/3-config-options/1-resourcedirectives/><b>1 - </b>Resource Directives</a></li><li data-nav-id=/kolibri/2-config-details/3-config-options/2-requestparameters/ title="Request Parameters" class=dd-item><a href=/kolibri/2-config-details/3-config-options/2-requestparameters/><b>2 - </b>Request Parameters</a></li><li data-nav-id=/kolibri/2-config-details/3-config-options/3-parsingconfig/ title="Parsing Configuration" class=dd-item><a href=/kolibri/2-config-details/3-config-options/3-parsingconfig/><b>3 - </b>Parsing Configuration</a></li><li data-nav-id=/kolibri/2-config-details/3-config-options/4-calculations/ title=Calculations class=dd-item><a href=/kolibri/2-config-details/3-config-options/4-calculations/><b>4 - </b>Calculations</a></li><li data-nav-id=/kolibri/2-config-details/3-config-options/5-aggregationtypemappings/ title="Aggregation Type Mappings" class=dd-item><a href=/kolibri/2-config-details/3-config-options/5-aggregationtypemappings/><b>5 - </b>Aggregation Type Mappings</a></li><li data-nav-id=/kolibri/2-config-details/3-config-options/6-taggingconfiguration/ title="Tagging Configuration" class=dd-item><a href=/kolibri/2-config-details/3-config-options/6-taggingconfiguration/><b>6 - </b>Tagging Configuration</a></li><li data-nav-id=/kolibri/2-config-details/3-config-options/7-tasks/ title=Tasks class=dd-item><a href=/kolibri/2-config-details/3-config-options/7-tasks/><b>7 - </b>Tasks</a></li></ul></li><li data-nav-id=/kolibri/2-config-details/4-file-formats/ title="File Formats" class=dd-item><a href=/kolibri/2-config-details/4-file-formats/><b>4. </b>File Formats</a><ul><li data-nav-id=/kolibri/2-config-details/4-file-formats/1-judgements/ title="Judgement Files" class=dd-item><a href=/kolibri/2-config-details/4-file-formats/1-judgements/><b>1 - </b>Judgement Files</a></li><li data-nav-id=/kolibri/2-config-details/4-file-formats/2-resultformat/ title="Result Files" class=dd-item><a href=/kolibri/2-config-details/4-file-formats/2-resultformat/><b>2 - </b>Result Files</a></li><li data-nav-id=/kolibri/2-config-details/4-file-formats/3-summaryformat/ title="Summary Format" class=dd-item><a href=/kolibri/2-config-details/4-file-formats/3-summaryformat/><b>3 - </b>Summary Format</a></li><li data-nav-id=/kolibri/2-config-details/4-file-formats/4-parameters/ title=Parameters class=dd-item><a href=/kolibri/2-config-details/4-file-formats/4-parameters/><b>4 - </b>Parameters</a></li></ul></li></ul></li></ul></li><li data-nav-id=/kolibri_archive/ title="Kolibri Documentation (Archive / Deprecated)" class=dd-item><a href=/kolibri_archive/>Kolibri Documentation (Archive / Deprecated)</a><ul><li data-nav-id=/kolibri_archive/kolibri-datatypes/ title="Kolibri-DataTypes Documentation" class=dd-item><a href=/kolibri_archive/kolibri-datatypes/>Kolibri-DataTypes Documentation</a><ul><li data-nav-id=/kolibri_archive/kolibri-datatypes/1-types/ title=Types class=dd-item><a href=/kolibri_archive/kolibri-datatypes/1-types/><b>1. </b>Types</a><ul><li data-nav-id=/kolibri_archive/kolibri-datatypes/1-types/1-categories/ title="DataType Categories" class=dd-item><a href=/kolibri_archive/kolibri-datatypes/1-types/1-categories/><b>1 - </b>DataType Categories</a></li></ul></li></ul></li><li data-nav-id=/kolibri_archive/kolibri-base/ title="Kolibri-Base Documentation" class=dd-item><a href=/kolibri_archive/kolibri-base/>Kolibri-Base Documentation</a><ul><li data-nav-id=/kolibri_archive/kolibri-base/1-basics/ title=Basics class=dd-item><a href=/kolibri_archive/kolibri-base/1-basics/><b>1. </b>Basics</a><ul><li data-nav-id=/kolibri_archive/kolibri-base/1-basics/1-runningit/ title="Getting it started" class=dd-item><a href=/kolibri_archive/kolibri-base/1-basics/1-runningit/><b>1 - </b>Getting it started</a></li><li data-nav-id=/kolibri_archive/kolibri-base/1-basics/2-monitoring/ title=Monitoring class=dd-item><a href=/kolibri_archive/kolibri-base/1-basics/2-monitoring/><b>2 - </b>Monitoring</a></li><li data-nav-id=/kolibri_archive/kolibri-base/1-basics/3-executeexamplejob/ title="Executing examples" class=dd-item><a href=/kolibri_archive/kolibri-base/1-basics/3-executeexamplejob/><b>3 - </b>Executing examples</a></li></ul></li><li data-nav-id=/kolibri_archive/kolibri-base/2-mechanisms/ title=Mechanisms class=dd-item><a href=/kolibri_archive/kolibri-base/2-mechanisms/><b>2. </b>Mechanisms</a><ul><li data-nav-id=/kolibri_archive/kolibri-base/2-mechanisms/1-overview/ title=Basics class=dd-item><a href=/kolibri_archive/kolibri-base/2-mechanisms/1-overview/><b>1 - </b>Basics</a></li></ul></li><li data-nav-id=/kolibri_archive/kolibri-base/3-step-by-step/ title="Step-by-Step Guide" class=dd-item><a href=/kolibri_archive/kolibri-base/3-step-by-step/><b>3. </b>Step-by-Step Guide</a><ul><li data-nav-id=/kolibri_archive/kolibri-base/3-step-by-step/0-overview/ title=Overview class=dd-item><a href=/kolibri_archive/kolibri-base/3-step-by-step/0-overview/><b>0 - </b>Overview</a></li><li data-nav-id=/kolibri_archive/kolibri-base/3-step-by-step/1-values/ title=Values class=dd-item><a href=/kolibri_archive/kolibri-base/3-step-by-step/1-values/><b>1 - </b>Values</a></li><li data-nav-id=/kolibri_archive/kolibri-base/3-step-by-step/2-generators/ title=Generators class=dd-item><a href=/kolibri_archive/kolibri-base/3-step-by-step/2-generators/><b>2 - </b>Generators</a></li><li data-nav-id=/kolibri_archive/kolibri-base/3-step-by-step/3-tags/ title=Tagging class=dd-item><a href=/kolibri_archive/kolibri-base/3-step-by-step/3-tags/><b>3 - </b>Tagging</a></li><li data-nav-id=/kolibri_archive/kolibri-base/3-step-by-step/4-processing-messages/ title="Processing Messages / Aggregation States" class=dd-item><a href=/kolibri_archive/kolibri-base/3-step-by-step/4-processing-messages/><b>4 - </b>Processing Messages / Aggregation States</a></li><li data-nav-id=/kolibri_archive/kolibri-base/3-step-by-step/5-writers/ title="Formats & Writers" class=dd-item><a href=/kolibri_archive/kolibri-base/3-step-by-step/5-writers/><b>5 - </b>Formats & Writers</a></li></ul></li><li data-nav-id=/kolibri_archive/kolibri-base/4-inputs/ title=Inputs class=dd-item><a href=/kolibri_archive/kolibri-base/4-inputs/><b>4. </b>Inputs</a></li></ul></li><li data-nav-id=/kolibri_archive/kolibri-watch/ title="Kolibri-Watch Documentation" class=dd-item><a href=/kolibri_archive/kolibri-watch/>Kolibri-Watch Documentation</a><ul><li data-nav-id=/kolibri_archive/kolibri-watch/1-ui/ title="UI - Kolibri Watch" class=dd-item><a href=/kolibri_archive/kolibri-watch/1-ui/><b>1. </b>UI - Kolibri Watch</a><ul><li data-nav-id=/kolibri_archive/kolibri-watch/1-ui/1-overview/ title=Overview class=dd-item><a href=/kolibri_archive/kolibri-watch/1-ui/1-overview/><b>1 - </b>Overview</a></li></ul></li></ul></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/awagen/kolibri/tree/main/kolibri-datatypes><i class='fab fa-github'></i> Github kolibri-datatypes repo</a></li><li><a class=padding href=https://github.com/awagen/kolibri/tree/main/kolibri-storage><i class='fab fa-github'></i> Github kolibri-storage repo</a></li><li><a class=padding href=https://github.com/awagen/kolibri/tree/main/kolibri-definitions><i class='fab fa-github'></i> Github kolibri-definitions repo</a></li><li><a class=padding href=https://github.com/awagen/kolibri/tree/main/kolibri-fleet-zio><i class='fab fa-github'></i> Github kolibri-fleet-zio repo</a></li><li><a class=padding href=https://github.com/awagen/kolibri/tree/main/kolibri-watch><i class='fab fa-github'></i> Github kolibri-watch repo</a></li><li><a class=padding href=https://github.com/awagen/response-juggler><i class='fab fa-github'></i> Github response-juggler repo</a></li><li><a class=padding href=https://www.linkedin.com/in/andreas-wagenmann/><i class='fab fa-linkedin'></i> LinkedIn</a></li><li><a class=padding href=https://twitter.com/andiwagen><i class='fab fa-twitter'></i> Twitter</a></li></ul></section><section id=footer></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/>Home</a> > <a href=/kolibri/>Kolibri Documentation</a> > <a href=/kolibri/2-config-details/>2. Configuring Jobs / Tasks</a> > Job Configurations</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#search_evaluation>SEARCH_EVALUATION</a></li><li><a href=#query_based_search_evaluation>QUERY_BASED_SEARCH_EVALUATION</a></li><li><a href=#requesting_task_sequence>REQUESTING_TASK_SEQUENCE</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Job Configurations</h1><p>Currently, there are four types of job definitions:</p><table><thead><tr><th>Job Definition Types</th><th></th></tr></thead><tbody><tr><td><em>JUST_WAIT</em></td><td>Dummy job. Only use this if you want to test the claiming of single batches by the nodes. The batches here only implement a wait-interval.</td></tr><tr><td><em>SEARCH_EVALUATION</em></td><td>Legacy search evaluation definition with all configuration options. Main format of definition till v0.1.5, thus left in for compatibility reasons. Recommended and most flexible way ifs<code>REQUESTING_TASK_SEQUENCE</code>.</td></tr><tr><td><em>QUERY_BASED_SEARCH_EVALUATION</em></td><td>Legacy search evaluation definition with reduced configuration options and some predefined settings. Main shortened format of definition till v0.1.5, thus left in for compatibility reasons. Recommended and most flexible way ifs<code>REQUESTING_TASK_SEQUENCE</code>.</td></tr><tr><td><em>REQUESTING_TASK_SEQUENCE</em></td><td>Build your processing pipeline by defining a sequence of tasks. Provides most flexibility. Recommended way of defining jobs.</td></tr></tbody></table><p>Actual UI selection screen:
<img src="/images/kolibri_update/KolibriWatchJobDefinitionTypes.png?raw=true" alt="Alt text" title="Kolibri Watch Job Definition Types"></p><p>Note that for the attribute <code>excludeParamColumns</code> you need to fill in something, which can also just be an empty list.
In case you want to keep an empty list, add an entry and delete it again in the UI such that an empty array is generated in the json
representation to the right. This is a temporary workaround due to the fact that the current config sees this field as mandatory.</p><p>Let&rsquo;s walk over the job definitions defining actual computation.
In the below those attributes that are purely legacy fields and not causing any effect (you will still need to set them in some cases) are marked with <code>(Not used)</code>. Fields with separate section here in the documentation for more details are marked with <code>(*)</code>.</p><h3 id=search_evaluation>SEARCH_EVALUATION</h3><p>This definition is exists to provide backward-compatibility to job definitions that were composed up to kolibri v0.1.5,
when the task-sequence configuration has not yet been provided. For new configurations we recommend using the <code>REQUESTING_TASK_SEQUENCE</code>
type, as it provides the most flexibility. Definitions submitted for the <code>SEARCH_EVALUATION</code> type are converted internally
to a task sequence.</p><p><img src="/images/kolibri_update/KolibriWatchSearchEvaluationDefinition.png?raw=true" alt="Alt text" title="Kolibri Watch Search Evaluation Definition"></p><p>The single fields are as follows:</p><table><thead><tr><th>SEARCH_EVALUATION fields</th><th></th></tr></thead><tbody><tr><td><em>jobName</em></td><td>Simply the name of the job. Prohibited character: underscore.</td></tr><tr><td><em>requestTasks</em></td><td>(Not used): Integer, defining how many batches are processed in parallel.</td></tr><tr><td><em>fixedParams</em></td><td>Definition of parameter settings that are applied on every request. You can assign multiple values to a single parameter name, they will be all set in the request.</td></tr><tr><td><em>contextPath</em></td><td>The url context path used for requests.</td></tr><tr><td><em>httpMethod</em></td><td>The http method to use, choose between <code>GET</code>, <code>PUT</code>, <code>POST</code>.</td></tr><tr><td><em>connections</em></td><td>Define or or more target urls by defining the <code>host</code> (without protocol prefix, e.g not &lsquo;http://search-service&rsquo; but &lsquo;search-service&rsquo;), the port, whether to use <code>http</code> or <code>https</code>). If multiple connections are defined, load will be distributed among them.</td></tr><tr><td>(*) <em>resourceDirectives</em></td><td>Resource directives are configurations of resources that shall be loaded centrally on each node, and are only removed after the node does not have any batch running anymore that relates to a job for which the resources were defined. Larger resources should be loaded this way, such as judgement lists or extensive parameter mappings. Right now the options are available: <code>JUDGEMENT_PROVIDER</code>, <code>MAP_STRING_TO_DOUBLE_VALUE</code>, <code>MAP_STRING_TO_STRING_VALUES</code>, <code>STRING_VALUES</code></td></tr><tr><td>(*) <em>requestParameters</em></td><td>Defines the sequence of parameters (<code>STANDALONE</code> or <code>MAPPING</code>) that are permutated to generate the whole range of requests to evaluate. While parameters of type <code>STANDALONE</code> are just iterated over, <code>MAPPINGS</code> provide the option to limit the permutation space by defining a parameter generating key values and one or more mappings that are either mapped to the key value or any other mapped parameter configured before. More details in the separate documentation section.</td></tr><tr><td><em>batchByIndex</em></td><td>Specifies the 0-based index of the above <code>requestParameters</code> list to define the parameter by which to batch the job (e.g the query-parameter is a natural parameter to batch by usually).</td></tr><tr><td>(*) <em>parsingConfig</em></td><td>The parsing configuration specifies which fields to parse from each response (response is assumed to be of json format).</td></tr><tr><td><em>excludeParamColumns</em></td><td>Sometimes it makes sense to exclude certain parameters from the parameters that are used to group results for each row in the calculation result. One use case is to exclude the query parameter if the batching is done by each query to avoid redundant entries. Another case is if we make use of the <code>*_REPLACE</code> parameter types, which are used to replace substrings in other parameters.</td></tr><tr><td>(*) <em>calculations</em></td><td>Sequence of different types of calculations to perform per request. Options include: <code>IR_METRICS</code>, <code>IDENTITY</code>, <code>FIRST_TRUE</code>, <code>FIRST_FALSE</code>, <code>TRUE_COUNT</code>, <code>FALSE_COUNT</code>, <code>BINARY_PRECISION_TRUE_AS_YES</code>, <code>BINARY_PRECISION_FALSE_AS_YES</code>, <code>STRING_SEQUENCE_VALUE_OCCURRENCE_HISTOGRAM</code>. For a detailed description see the separate section in this documentation.</td></tr><tr><td>(*) <em>metricNameToAggregationTypeMapping</em></td><td>Assignment of metric name to the applicable aggregation type. Common IR metrics should be assigned to <code>DOUBLE_AVG</code>, and histogram would be of type <code>NESTED_MAP_UNWEIGHTED_SUM_VALUE</code> (just summing up occurrences without using sample weights). If nothing is defined, default value assigned will be <code>DOUBLE_AVG</code>, so do not forget to assign the right types in case this does not apply. You will usually not need any types other than the mentioned ones, but the full range of options are: <code>DOUBLE_AVG</code>, <code>SEQUENCE_KEEP_FIRST</code>, <code>MAP_UNWEIGHTED_SUM_VALUE</code>, <code>MAP_WEIGHTED_SUM_VALUE</code>, <code>NESTED_MAP_UNWEIGHTED_SUM_VALUE</code>, <code>NESTED_MAP_WEIGHTED_SUM_VALUE</code>.</td></tr><tr><td>(*) <em>taggingConfiguration</em></td><td>Set distinct tagging options. Per tagger you need to select whether to make it extending, that is whether a separate tag shall be added or the tag shall extend existing ones (see <code>extend</code>) attribute. Allows definition for distinct stages of processing as <code>initTagger</code> (tagging on request template), <code>processedTagger</code> (acting on the response) and <code>resultTagger</code> (acting on the generated response). Yet right now only two options are implemented, one by request parameter and the other by result length.</td></tr><tr><td>(*) <em>wrapUpFunction</em></td><td>Allows definition of processing steps to execute after the job is finished (this is part of the job-wrap-up task that is claimed by the nodes). See the section on task definitions for more details.</td></tr><tr><td><em>allowedTimePerElementInMillis</em></td><td>(Not used): Timeout for each single element per batch.</td></tr><tr><td><em>allowedTimePerBatchInSeconds</em></td><td>(Not used): Timeout for the whole batch (e.g for the sum of time the single elements in a batch take up).</td></tr><tr><td><em>allowedTimeForJobInSeconds</em></td><td>(Not used): Timeout for the whole job (that is processing of all batches contained in the job).</td></tr><tr><td><em>expectResultsFromBatchCalculations</em></td><td>(Not used): Was used in the akka-based variant to decide whether the central supervisor needs the result (e.g for an overall aggregation) or an empty confirmation is enough (such as when results of batches are stored in central storage anyways).</td></tr></tbody></table><p>A fully configured form can look like this:</p><p><img src="/images/kolibri_update/KolibriWatchSearchEvaluationDef1.png?raw=true" alt="Alt text" title="Kolibri Watch Search Evaluation Definition - Pt1"></p><p><img src="/images/kolibri_update/KolibriWatchSearchEvaluationDef2.png?raw=true" alt="Alt text" title="Kolibri Watch Search Evaluation Definition - Pt2"></p><p><img src="/images/kolibri_update/KolibriWatchSearchEvaluationDef3.png?raw=true" alt="Alt text" title="Kolibri Watch Search Evaluation Definition - Pt3"></p><h3 id=query_based_search_evaluation>QUERY_BASED_SEARCH_EVALUATION</h3><p>Note that this configuration option contains some pre-defined configurations. This includes a range of IR metrics (more details below).
Due to this, there is a predefined key under which the judgements list is loaded, and you will need to use the same key in the
definition of <code>otherCalculations</code> in case you want to add more IR metrics. The key format is <code>KOLIBRI_JUDGEMENTS-job=[jobName]</code>, where jobName is the
name configured in the <code>jobName</code> field. Further, the setting <code>productIdsKey</code> needs to be set to the value <code>productIds</code>.</p><table><thead><tr><th>QUERY_BASED_SEARCH_EVALUATION fields</th><th></th></tr></thead><tbody><tr><td><em>jobName</em></td><td>Simply the name of the job. Prohibited character: underscore.</td></tr><tr><td><em>connections</em></td><td>Define or or more target urls by defining the <code>host</code> (without protocol prefix, e.g not &lsquo;http://search-service&rsquo; but &lsquo;search-service&rsquo;), the port, whether to use <code>http</code> or <code>https</code>). If multiple connections are defined, load will be distributed among them.</td></tr><tr><td><em>fixedParams</em></td><td>Definition of parameter settings that are applied on every request. You can assign multiple values to a single parameter name, they will be all set in the request.</td></tr><tr><td><em>contextPath</em></td><td>The url context path used for requests.</td></tr><tr><td><em>queryParameter</em></td><td>The name of the parameter defined unter <code>requestParameters</code> that provides the queries.</td></tr><tr><td><em>httpMethod</em></td><td>The http method to use, choose between <code>GET</code>, <code>PUT</code>, <code>POST</code>.</td></tr><tr><td>(*) <em>productIdSelector</em></td><td>The selector to extract the productIds from the response json. See the separate documentation section on selectors.</td></tr><tr><td>(*) <em>otherSelectors</em></td><td>Allows definition of further extractors to include additional fields.</td></tr><tr><td>(*) <em>otherCalculations</em></td><td>Define additional calculations besides the pre-defined ones (see below).</td></tr><tr><td><em>otherMetricNameToAggregationTypeMapping</em></td><td>Define the aggregation type mappings for the additional metrics you configured in <code>otherCalculations</code>.</td></tr><tr><td><em>judgementFilePath</em></td><td>The file path where the judgements reside (relative path compared to configured base path).</td></tr><tr><td>(*) <em>requestParameters</em></td><td>Defines the sequence of parameters (<code>STANDALONE</code> or <code>MAPPING</code>) that are permutated to generate the whole range of requests to evaluate. While parameters of type <code>STANDALONE</code> are just iterated over, <code>MAPPINGS</code> provide the option to limit the permutation space by defining a parameter generating key values and one or more mappings that are either mapped to the key value or any other mapped parameter configured before. More details in the separate documentation section.</td></tr><tr><td><em>excludeParamColumns</em></td><td>Sometimes it makes sense to exclude certain parameters from the parameters that are used to group results for each row in the calculation result. One use case is to exclude the query parameter if the batching is done by each query to avoid redundant entries. Another case is if we make use of the <code>*_REPLACE</code> parameter types, which are used to replace substrings in other parameters.</td></tr></tbody></table><h4 id=pre-defined-settings>Pre-Defined Settings</h4><p>Some of the settings are already predefined in this configuration type. Let&rsquo;s see which.</p><ul><li>productIds are stored under the key <code>productIds</code>.</li><li>the judgement data is loaded in a resource with the key <code>KOLIBRI_JUDGEMENTS-job=[jobName]</code>, where <code>[jobName]</code> corresponds to the job name configured.</li><li>batching happens on index 0, thus in case you want to batch on your query parameter, make sure you configure it at first position in the parameter list.</li><li>a bunch of IR metrics are pre-defined, those are:<ul><li>NDCG@2</li><li>NDCG@4</li><li>NDCG@8</li><li>NDCG@12</li><li>NDCG@24</li><li>PRECISION@k=2,t=0.2 (t=0.2 stands for threshold to decide between relevant / non-relevant is 0.2)</li><li>PRECISION@k=4,t=0.2</li><li>RECALL@k=2,t=0.2</li><li>RECALL@k=4,t=0.2</li></ul></li><li>judgement handling strategy is set to <code>EXIST_RESULTS_AND_JUDGEMENTS_MISSING_AS_ZEROS</code><ul><li>validation done based on existence of results (if no results exist (0 result hit) the result is marked as failed and recorded as such)</li><li>in case a product does not have an existing judgement for a query, the judgement value of 0.0 will be used.
Note that in the <code>SEARCH_EVALUATION</code> definition format you can select an alternative (such as average of non-missing judgements, to see unknown products for the query as of average quality)</li></ul></li><li>tagging is only done based on query parameter</li><li>the configured wrapUpFunction (executed after all batches completed) aggregates all generated partial results into an overall aggregation, where each sample gets equal weight (1.0)</li></ul><p>A completed form could look like this:</p><p><img src="/images/kolibri_update/KolibriWatchQueryBasedSearchEvalDef1.png?raw=true" alt="Alt text" title="Kolibri Watch Query Based Search Evaluation Definition - Pt1"></p><p><img src="/images/kolibri_update/KolibriWatchQueryBasedSearchEvalDef2.png?raw=true" alt="Alt text" title="Kolibri Watch Query Based Search Evaluation Definition - Pt2"></p><p><img src="/images/kolibri_update/KolibriWatchQueryBasedSearchEvalDef3.png?raw=true" alt="Alt text" title="Kolibri Watch Query Based Search Evaluation Definition - Pt3"></p><h3 id=requesting_task_sequence>REQUESTING_TASK_SEQUENCE</h3><p>This is the recommended and most flexible way of composing computations.</p><p>The fields are:</p><table><thead><tr><th>REQUESTING_TASK_SEQUENCE fields</th><th></th></tr></thead><tbody><tr><td><em>jobName</em></td><td>Simply the name of the job. Prohibited character: underscore.</td></tr><tr><td>(*) <em>resourceDirectives</em></td><td>Resource directives are configurations of resources that shall be loaded centrally on each node, and are only removed after the node does not have any batch running anymore that relates to a job for which the resources were defined. Larger resources should be loaded this way, such as judgement lists or extensive parameter mappings. Right now the options are available: <code>JUDGEMENT_PROVIDER</code>, <code>MAP_STRING_TO_DOUBLE_VALUE</code>, <code>MAP_STRING_TO_STRING_VALUES</code>, <code>STRING_VALUES</code></td></tr><tr><td>(*) <em>requestParameters</em></td><td>Defines the sequence of parameters (<code>STANDALONE</code> or <code>MAPPING</code>) that are permutated to generate the whole range of requests to evaluate. While parameters of type <code>STANDALONE</code> are just iterated over, <code>MAPPINGS</code> provide the option to limit the permutation space by defining a parameter generating key values and one or more mappings that are either mapped to the key value or any other mapped parameter configured before. More details in the separate documentation section.</td></tr><tr><td><em>batchByIndex</em></td><td>Specifies the 0-based index of the above <code>requestParameters</code> list to define the parameter by which to batch the job (e.g the query-parameter is a natural parameter to batch by usually).</td></tr><tr><td>(*) <em>taskSequence</em></td><td>List of actual tasks to compute. Tasks defined at index i will have access to data generated in the tasks from index [0, i-1]. For a more detailed description of the options, see the respective section.</td></tr><tr><td><em>metricRowResultKey</em></td><td>The key of the generated result under which to find the end result of type MetricRow. For this to be available, any task in the task sequence needs to compute such an object and store it in the result map under the configured key. See <code>METRIC CALCULATION</code> task for an example.</td></tr></tbody></table><p>Let&rsquo;s look at a completed example that provides a sequence of <code>REQUEST_PARSE</code> and <code>METRIC_CALCULATION</code> tasks to request one or many target systems and
calculate metrics from the retrieved results:</p><p><img src="/images/kolibri_update/KolibriWatchTaskSequenceJobDef1.png?raw=true" alt="Alt text" title="Kolibri Watch Task Sequence Job Def - Pt1"></p><p><img src="/images/kolibri_update/KolibriWatchTaskSequenceJobDef2.png?raw=true" alt="Alt text" title="Kolibri Watch Task Sequence Job Def - Pt2"></p><p><img src="/images/kolibri_update/KolibriWatchTaskSequenceJobDef3.png?raw=true" alt="Alt text" title="Kolibri Watch Task Sequence Job Def - Pt3"></p><p><img src="/images/kolibri_update/KolibriWatchTaskSequenceJobDef4.png?raw=true" alt="Alt text" title="Kolibri Watch Task Sequence Job Def - Pt4"></p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/kolibri/2-config-details/1-task-definitions/ title="Task Configurations"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/kolibri/2-config-details/3-config-options/ title="Configuration Options" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1694164550></script>
<script src=/js/perfect-scrollbar.min.js?1694164550></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1694164550></script>
<script src=/js/jquery.sticky.js?1694164550></script>
<script src=/js/featherlight.min.js?1694164550></script>
<script src=/js/highlight.pack.js?1694164550></script>
<script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1694164550></script>
<script src=/js/learn.js?1694164550></script>
<script src=/js/hugo-learn.js?1694164550></script>
<script src=/mermaid/mermaid.js?1694164550></script>
<script>mermaid.initialize({startOnLoad:!0})</script></body></html>