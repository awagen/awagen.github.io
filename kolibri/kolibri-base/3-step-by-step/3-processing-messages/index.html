<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.85.0"><meta name=description content><link rel="shortcut icon" href=/images/kolibri.svg type=image/x-icon><title>Processing Messages / Aggregation States :: Kolibri Documentation</title><link href=/css/nucleus.css?1641199719 rel=stylesheet><link href=/css/fontawesome-all.min.css?1641199719 rel=stylesheet><link href=/css/hybrid.css?1641199719 rel=stylesheet><link href=/css/featherlight.min.css?1641199719 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1641199719 rel=stylesheet><link href=/css/auto-complete.css?1641199719 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1641199719 rel=stylesheet><link href=/css/theme.css?1641199719 rel=stylesheet><link href=/css/tabs.css?1641199719 rel=stylesheet><link href=/css/hugo-theme.css?1641199719 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1641199719></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/kolibri/kolibri-base/3-step-by-step/3-processing-messages/><nav id=sidebar><div id=header-wrapper><div id=header><img src=/images/kolibri.svg alt=Kolibri height=100><div>HOME OF KOLIBRI</div></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1641199719></script><script type=text/javascript src=/js/auto-complete.js?1641199719></script><script type=text/javascript>var baseurl="http://awagen.github.io/"</script><script type=text/javascript src=/js/search.js?1641199719></script></div><section id=homelinks><ul><li><a class=padding href=/><i class="fas fa-home"></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/kolibri/ title="Kolibri Documentation" class="dd-item
parent"><a href=/kolibri/>Kolibri Documentation</a><ul><li data-nav-id=/kolibri/kolibri-datatypes/ title="Kolibri-DataTypes Documentation" class=dd-item><a href=/kolibri/kolibri-datatypes/>Kolibri-DataTypes Documentation</a><ul><li data-nav-id=/kolibri/kolibri-datatypes/1-types/ title=Types class=dd-item><a href=/kolibri/kolibri-datatypes/1-types/><b>1. </b>Types</a><ul><li data-nav-id=/kolibri/kolibri-datatypes/1-types/1-categories/ title="DataType Categories" class=dd-item><a href=/kolibri/kolibri-datatypes/1-types/1-categories/><b>1 - </b>DataType Categories</a></li></ul></li></ul></li><li data-nav-id=/kolibri/kolibri-base/ title="Kolibri-Base Documentation" class="dd-item
parent"><a href=/kolibri/kolibri-base/>Kolibri-Base Documentation</a><ul><li data-nav-id=/kolibri/kolibri-base/1-basics/ title=Basics class=dd-item><a href=/kolibri/kolibri-base/1-basics/><b>1. </b>Basics</a><ul><li data-nav-id=/kolibri/kolibri-base/1-basics/1-runningit/ title="Getting it started" class=dd-item><a href=/kolibri/kolibri-base/1-basics/1-runningit/><b>1 - </b>Getting it started</a></li><li data-nav-id=/kolibri/kolibri-base/1-basics/2-monitoring/ title=Monitoring class=dd-item><a href=/kolibri/kolibri-base/1-basics/2-monitoring/><b>2 - </b>Monitoring</a></li><li data-nav-id=/kolibri/kolibri-base/1-basics/3-executeexamplejob/ title="Executing examples" class=dd-item><a href=/kolibri/kolibri-base/1-basics/3-executeexamplejob/><b>3 - </b>Executing examples</a></li></ul></li><li data-nav-id=/kolibri/kolibri-base/2-mechanisms/ title=Mechanisms class=dd-item><a href=/kolibri/kolibri-base/2-mechanisms/><b>2. </b>Mechanisms</a><ul><li data-nav-id=/kolibri/kolibri-base/2-mechanisms/1-overview/ title=Basics class=dd-item><a href=/kolibri/kolibri-base/2-mechanisms/1-overview/><b>1 - </b>Basics</a></li></ul></li><li data-nav-id=/kolibri/kolibri-base/3-step-by-step/ title="Step-by-Step Guide" class="dd-item
parent"><a href=/kolibri/kolibri-base/3-step-by-step/><b>3. </b>Step-by-Step Guide</a><ul><li data-nav-id=/kolibri/kolibri-base/3-step-by-step/0-values/ title=Values class=dd-item><a href=/kolibri/kolibri-base/3-step-by-step/0-values/><b>0 - </b>Values</a></li><li data-nav-id=/kolibri/kolibri-base/3-step-by-step/1-generators/ title=Generators class=dd-item><a href=/kolibri/kolibri-base/3-step-by-step/1-generators/><b>1 - </b>Generators</a></li><li data-nav-id=/kolibri/kolibri-base/3-step-by-step/2-tags/ title=Tagging class=dd-item><a href=/kolibri/kolibri-base/3-step-by-step/2-tags/><b>2 - </b>Tagging</a></li><li data-nav-id=/kolibri/kolibri-base/3-step-by-step/3-processing-messages/ title="Processing Messages / Aggregation States" class="dd-item active"><a href=/kolibri/kolibri-base/3-step-by-step/3-processing-messages/><b>3 - </b>Processing Messages / Aggregation States</a></li><li data-nav-id=/kolibri/kolibri-base/3-step-by-step/4-writers/ title="Formats & Writers" class=dd-item><a href=/kolibri/kolibri-base/3-step-by-step/4-writers/><b>4 - </b>Formats & Writers</a></li></ul></li><li data-nav-id=/kolibri/kolibri-base/4-inputs/ title=Inputs class=dd-item><a href=/kolibri/kolibri-base/4-inputs/><b>4. </b>Inputs</a></li></ul></li><li data-nav-id=/kolibri/kolibri-watch/ title="Kolibri-Watch Documentation" class=dd-item><a href=/kolibri/kolibri-watch/>Kolibri-Watch Documentation</a><ul><li data-nav-id=/kolibri/kolibri-watch/1-ui/ title="UI - Kolibri Watch" class=dd-item><a href=/kolibri/kolibri-watch/1-ui/><b>1. </b>UI - Kolibri Watch</a><ul><li data-nav-id=/kolibri/kolibri-watch/1-ui/1-overview/ title=Overview class=dd-item><a href=/kolibri/kolibri-watch/1-ui/1-overview/><b>1 - </b>Overview</a></li></ul></li></ul></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/awagen/kolibri/tree/main/kolibri-datatypes><i class="fab fa-github"></i> Github kolibri-datatypes repo</a></li><li><a class=padding href=https://github.com/awagen/kolibri/tree/main/kolibri-base><i class="fab fa-github"></i> Github kolibri-base repo</a></li><li><a class=padding href=https://github.com/awagen/kolibri/tree/main/kolibri-watch><i class="fab fa-github"></i> Github kolibri-watch repo</a></li><li><a class=padding href=https://github.com/awagen/response-juggler><i class="fab fa-github"></i> Github response-juggler repo</a></li><li><a class=padding href=https://www.linkedin.com/in/andreas-wagenmann/><i class="fab fa-linkedin"></i> LinkedIn</a></li><li><a class=padding href=https://twitter.com/andiwagen><i class="fab fa-twitter"></i> Twitter</a></li></ul></section><section id=footer></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/>Home</a> > <a href=/kolibri/>Kolibri Documentation</a> > <a href=/kolibri/kolibri-base/>Kolibri-Base Documentation</a> > <a href=/kolibri/kolibri-base/3-step-by-step/>Step-by-Step Guide</a> > Processing Messages / Aggregation States</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#processing-messages-and-aggregationstates>Processing Messages And AggregationStates</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Processing Messages / Aggregation States</h1><h2 id=processing-messages-and-aggregationstates>Processing Messages And AggregationStates</h2><p>Single processing units are represented by instances of type ProcessingMessage.
This allows enriching of values with tags, which can be used for selective result handling,
such as result writing, aggregations and selective handling of values.</p><p>Completion of a single batch is signalled by message of type AggregationState.
This can be of two types:</p><ul><li><code>AggregationStateWithoutData</code>: provide info about completed batch without the generated data</li><li><code>AggregationStateWithData</code>: provide info about completed batch with the generated data</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=color:#66d9ef>trait</span> <span style=color:#a6e22e>AggregationState</span><span style=color:#f92672>[</span><span style=color:#66d9ef>+T</span><span style=color:#f92672>]</span> <span style=color:#a6e22e>extends</span> <span style=color:#a6e22e>KolibriSerializable</span> <span style=color:#66d9ef>with</span> <span style=color:#a6e22e>TaggedWithType</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>val</span> jobID<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>String</span>
    <span style=color:#66d9ef>val</span> batchNr<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>Int</span>
    <span style=color:#66d9ef>val</span> executionExpectation<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>ExecutionExpectation</span>
<span style=color:#f92672>}</span>

<span style=color:#66d9ef>case</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AggregationStateWithoutData</span><span style=color:#f92672>[</span><span style=color:#66d9ef>+V</span><span style=color:#f92672>](</span>containedElementCount<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>Int</span><span style=color:#f92672>,</span>
                                           jobID<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>String</span><span style=color:#f92672>,</span>
                                           batchNr<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>Int</span><span style=color:#f92672>,</span>
                                           executionExpectation<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>ExecutionExpectation</span><span style=color:#f92672>)</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>AggregationState</span><span style=color:#f92672>[</span><span style=color:#66d9ef>V</span><span style=color:#f92672>]</span>

<span style=color:#66d9ef>case</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AggregationStateWithData</span><span style=color:#f92672>[</span><span style=color:#66d9ef>+V</span><span style=color:#f92672>](</span>data<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>V</span><span style=color:#f92672>,</span>
                                        jobID<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>String</span><span style=color:#f92672>,</span>
                                        batchNr<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>Int</span><span style=color:#f92672>,</span>
                                        executionExpectation<span style=color:#66d9ef>:</span> <span style=color:#66d9ef>ExecutionExpectation</span><span style=color:#f92672>)</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>AggregationState</span><span style=color:#f92672>[</span><span style=color:#66d9ef>V</span><span style=color:#f92672>]</span>
</code></pre></div><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/kolibri/kolibri-base/3-step-by-step/2-tags/ title=Tagging><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/kolibri/kolibri-base/3-step-by-step/4-writers/ title="Formats & Writers" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1641199719></script><script src=/js/perfect-scrollbar.min.js?1641199719></script><script src=/js/perfect-scrollbar.jquery.min.js?1641199719></script><script src=/js/jquery.sticky.js?1641199719></script><script src=/js/featherlight.min.js?1641199719></script><script src=/js/highlight.pack.js?1641199719></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1641199719></script><script src=/js/learn.js?1641199719></script><script src=/js/hugo-learn.js?1641199719></script><script src=/mermaid/mermaid.js?1641199719></script><script>mermaid.initialize({startOnLoad:!0})</script></body></html>